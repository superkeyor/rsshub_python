(()=>{"use strict";var e={24397:function(e,t,n){n.d(t,{dG:()=>r});var r=function(){}},92806:function(e,t,n){n.d(t,{HD:()=>d,Kn:()=>c,U$:()=>g,Yr:()=>_,hj:()=>p,kJ:()=>u,mf:()=>h,o8:()=>f,yO:()=>b});var r,i,o=n(51021),s=n(4547),a=n(63791),l=Object.prototype.toString;function u(e){return"[object Array]"===l.call(e)}function c(e){return"[object Object]"===l.call(e)}function d(e){return"[object String]"===l.call(e)}function p(e){return"[object Number]"===l.call(e)&&e==e}function f(e){return void 0===e}function h(e){return"function"==typeof e}function g(e,t){return null==e||!1===e||"string"==typeof e&&(t?""===e.trim():""===e)}var m=function(e){return e&&(0,o.isValidElement)(e)&&"function"==typeof e.type},y=function(e){var t;return m(e)&&!!(null==(t=e.type.prototype)?void 0:t.isReactComponent)},b=Number(null==(r=s.version)?void 0:r.split(".")[0])>17,v=Number(null==(i=s.version)?void 0:i.split(".")[0])>18,S=function(e){if(!v)return(0,a.isForwardRef)(e);var t=Symbol.for("react.element"),n=Symbol.for("react.transitional.element"),r=Symbol.for("react.forward_ref");if("object"==typeof e&&null!==e){var i=e.$$typeof;if(i===t||i===n){var o=e.type;return(o&&o.$$typeof)===r}}return!1},_=function(e){return!!((0,o.isValidElement)(e)&&"string"==typeof e.type||S(e))||!!m(e)&&y(e)}},98984:function(e,t,n){n.d(t,{AV:()=>i,Ce:()=>r,K5:()=>s,Xd:()=>a,a2:()=>o,ol:()=>l});var r={key:"Enter",code:13},i={key:"Escape",code:27},o={key:"ArrowUp",code:38},s={key:"ArrowDown",code:40},a={key:"ArrowLeft",code:37},l={key:"ArrowRight",code:39}},18406:function(e,t,n){n.d(t,{ZP:()=>l,f:()=>i});var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)",xxxl:"(min-width: 2000px)"},o=[],s=-1,a={};let l={matchHandlers:{},dispatch:function(e,t){return a=e,!(o.length<1)&&(o.forEach(function(e){e.func(a,t)}),!0)},subscribe:function(e){0===o.length&&this.register();var t=(++s).toString();return o.push({token:t,func:e}),e(a,null),t},unsubscribe:function(e){0===(o=o.filter(function(t){return t.token!==e})).length&&this.unregister()},unregister:function(){var e=this;Object.keys(i).forEach(function(t){var n=i[t],r=e.matchHandlers[n];r&&r.mql&&r.listener&&r.mql.removeListener(r.listener)})},register:function(){var e=this;Object.keys(i).forEach(function(t){var n=i[t],o=function(n){var i,o=n.matches;e.dispatch(r(r({},a),((i={})[t]=o,i)),t)},s=window.matchMedia(n);s.addListener(o),e.matchHandlers[n]={mql:s,listener:o},o(s)})}}},86423:function(e,t,n){n.r(t),n.d(t,{CancellationTokenSource:()=>u,Emitter:()=>c,KeyCode:()=>d,KeyMod:()=>p,MarkerSeverity:()=>y,MarkerTag:()=>b,Position:()=>f,Range:()=>h,Selection:()=>g,SelectionDirection:()=>m,Token:()=>S,Uri:()=>v,editor:()=>_,languages:()=>x});var r=n(98742),i=n(16952),o=n(27062),s=n(34669),a=n(26880);r.BH.wrappingIndent.defaultValue=0,r.BH.glyphMargin.defaultValue=!1,r.BH.autoIndent.defaultValue=3,r.BH.overviewRulerLanes.defaultValue=2,a.xC.setFormatterSelector((e,t,n)=>Promise.resolve(e[0]));let l=(0,i.createMonacoBaseAPI)();l.editor=(0,o.yU)(),l.languages=(0,s.DT)();let u=l.CancellationTokenSource,c=l.Emitter,d=l.KeyCode,p=l.KeyMod,f=l.Position,h=l.Range,g=l.Selection,m=l.SelectionDirection,y=l.MarkerSeverity,b=l.MarkerTag,v=l.Uri,S=l.Token,_=l.editor,x=l.languages,w=globalThis.MonacoEnvironment;((null==w?void 0:w.globalAPI)||"function"==typeof define&&define.amd)&&(globalThis.monaco=l),void 0!==globalThis.require&&"function"==typeof globalThis.require.config&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]})},18011:function(e,t,n){n.d(t,{j6:()=>r.editor}),n(39735),n(74609),n(4020),n(6850),n(74425),n(92549),n(20279),n(14337),n(52314),n(90461),n(74807),n(27722),n(55785),n(52124);var r=n(86423)},19798:function(e,t,n){n.d(t,{ZP:()=>y});var r=n(90203),i=n(40168),o=n(51021),s=n(4547),a=n(64360),l=n(83026),u=n(3606),c="unmounted",d="exited",p="entering",f="entered",h="exiting",g=function(e){function t(t,n){var r,i=e.call(this,t,n)||this,o=n&&!n.isMounting?t.enter:t.appear;return i.appearStatus=null,t.in?o?(r=d,i.appearStatus=p):r=f:r=t.unmountOnExit||t.mountOnEnter?c:d,i.state={status:r},i.nextCallback=null,i}(0,i.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===c?{status:d}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==p&&n!==f&&(t=p):(n===p||n===f)&&(t=h)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===p){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this);n&&(0,u.Q)(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===d&&this.setState({status:c})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[s.findDOMNode(this),r],o=i[0],l=i[1],u=this.getTimeouts(),c=r?u.appear:u.enter;if(!e&&!n||a.Z.disabled)return void this.safeSetState({status:f},function(){t.props.onEntered(o)});this.props.onEnter(o,l),this.safeSetState({status:p},function(){t.props.onEntering(o,l),t.onTransitionEnd(c,function(){t.safeSetState({status:f},function(){t.props.onEntered(o,l)})})})},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:s.findDOMNode(this);if(!t||a.Z.disabled)return void this.safeSetState({status:d},function(){e.props.onExited(r)});this.props.onExit(r),this.safeSetState({status:h},function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,function(){e.safeSetState({status:d},function(){e.props.onExited(r)})})})},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(!n||r)return void setTimeout(this.nextCallback,0);if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)},n.render=function(){var e=this.state.status;if(e===c)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,r.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return o.createElement(l.Z.Provider,{value:null},"function"==typeof n?n(e,i):o.cloneElement(o.Children.only(n),i))},t}(o.Component);function m(){}g.contextType=l.Z,g.propTypes={},g.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:m,onEntering:m,onEntered:m,onExit:m,onExiting:m,onExited:m},g.UNMOUNTED=c,g.EXITED=d,g.ENTERING=p,g.ENTERED=f,g.EXITING=h;let y=g},33499:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator,h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}function b(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var S=v.prototype=new b;S.constructor=v,g(S,y.prototype),S.isPureReactComponent=!0;var _=Array.isArray,x=Object.prototype.hasOwnProperty,w={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)x.call(t,i)&&!E.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:w.current}}function k(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var j=/\/+/g;function O(e,t){var n,r;return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36)}function T(e,t,i){if(null==e)return e;var o=[],s=0;return!function e(t,i,o,s,a){var l,u,c,d=typeof t;("undefined"===d||"boolean"===d)&&(t=null);var p=!1;if(null===t)p=!0;else switch(d){case"string":case"number":p=!0;break;case"object":switch(t.$$typeof){case n:case r:p=!0}}if(p)return a=a(p=t),t=""===s?"."+O(p,0):s,_(a)?(o="",null!=t&&(o=t.replace(j,"$&/")+"/"),e(a,i,o,"",function(e){return e})):null!=a&&(k(a)&&(l=a,u=o+(!a.key||p&&p.key===a.key?"":(""+a.key).replace(j,"$&/")+"/")+t,a={$$typeof:n,type:l.type,key:u,ref:l.ref,props:l.props,_owner:l._owner}),i.push(a)),1;if(p=0,s=""===s?".":s+":",_(t))for(var h=0;h<t.length;h++){var g=s+O(d=t[h],h);p+=e(d,i,o,g,a)}else if("function"==typeof(g=null===(c=t)||"object"!=typeof c?null:"function"==typeof(c=f&&c[f]||c["@@iterator"])?c:null))for(t=g.call(t),h=0;!(d=t.next()).done;)g=s+O(d=d.value,h++),p+=e(d,i,o,g,a);else if("object"===d)throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(i=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return p}(e,o,"","",function(e){return t.call(i,e,s++)}),o}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},N={transition:null};function P(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=v,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:N,ReactCurrentOwner:w},t.act=P,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)x.call(t,u)&&!E.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=P,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},87594:function(e,t,n){n.d(t,{L7:()=>r});let r="importFile:"},91088:function(e,t,n){n.d(t,{mr:()=>r});let r=n(15589).i8},77811:function(e,t,n){n.d(t,{BW:()=>s,CP:()=>o,Gf:()=>d,J7:()=>l,Kv:()=>a,Ru:()=>c,le:()=>u,oO:()=>i});var r=n(54867);let i=1,o=2,s=3,a=1,l=2,u="complete";class c extends r.M{enableCache(){super.enableCache(),this.scriptCodeDAO.enableCache()}save(e){return super._save(e.uuid,e)}findByUUID(e){return this.get(e)}async getAndCode(e){let[t,n]=await Promise.all([this.get(e),this.scriptCodeDAO.get(e)]);if(t&&n)return Object.assign(t,n)}findByName(e){return this.findOne((t,n)=>n.name===e)}findByNameAndNamespace(e,t){return this.findOne((n,r)=>r.name===e&&(!t||r.namespace===t))}findByUUIDAndSubscribeUrl(e,t){return this.findOne((n,r)=>r.uuid===e&&r.subscribeUrl===t)}findByOriginAndSubscribeUrl(e,t){return this.findOne((n,r)=>r.origin===e&&r.subscribeUrl===t)}constructor(){var e,t;super("script"),e="scriptCodeDAO",t=new d,e in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t}}class d extends r.M{findByUUID(e){return this.get(e)}save(e){return super._save(e.uuid,e)}constructor(){super("scriptCode")}}},56378:function(e,t,n){n(54867).M},30159:function(e,t,n){n.d(t,{D0:()=>y,ZP:()=>S,cW:()=>b,kx:()=>v});var r=n(36910),i=n(90001),o=n(97766),s=n.n(o),a=n(52136),l=n.n(a),u=n(58533),c=n(82900),d=n(20027),p=n(96531),f=n(79554),h=n(49847),g=n(2285),m=n(68988);function y(e,t){r.ZP.changeLanguage(e,t),s().locale(e.toLocaleLowerCase())}function b(e){let t=chrome.i18n.getUILanguage(),n=globalThis.localStorage&&localStorage.language||t;r.ZP.use(i.Db).init({fallbackLng:"en-US",lng:n,interpolation:{escapeValue:!1},resources:{"en-US":{title:"English",translation:u},"zh-CN":{title:"简体中文",translation:d},"zh-TW":{title:"繁体中文",translation:p},"ja-JP":{title:"日本語",translation:h},"de-DE":{title:"Deutsch",translation:g},"vi-VN":{title:"Tiếng Việt",translation:c},"ru-RU":{title:"Русский",translation:m},"ach-UG":{title:"伪语言",translation:f}}}),e.getLanguage().then(e=>{y(e),e.startsWith("zh-")})}function v(){return chrome.i18n.getAcceptLanguages().then(e=>{for(let t=0;t<e.length;t+=1){let n=e[t];if(r.ZP.hasResourceBundle(n,"translation"))return n}let t={};for(let e of r.ZP.languages){let n=e.split("-")[0];t[n]||(t[n]=[]),t[n].push(e)}for(let n=0;n<e.length;n+=1){let r=e[n].split("-")[0];if(t[r]&&t[r].length>0)return t[r][0]}return""})}n(85937),n(81473),n(7306),n(42800),n(93606),n(99397),n(78309),s().extend(l());let S=r.ZP},64281:function(e,t,n){var r=n(35330),i=n(51021),o=n(50145),s=n(27104),a=n(74918),l=n(77113),u=n(90001),c=n(75025),d=n(13800),p=n(54897),f=n(35305),h=n(46516),g=n(59991);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(82519),n(30159),n(19245),new h.Z({writer:new class{write(e,t,n){this.send.sendMessage({action:this.action,data:{id:0,level:e,message:t,label:n,createtime:Date.now()}})}constructor(e,t="logger"){m(this,"action",void 0),m(this,"send",void 0),this.action=t,this.send=e}}(g.yw),labels:{env:"confirm"}}).logger().debug("confirm page start");let y=(0,r.jsx)(p.zt,{store:f.h,children:(0,r.jsx)(d.Z,{className:"!flex-col !px-4 box-border",children:(0,r.jsx)(function(){let e=window.location.search.split("=")[1],[t,n]=i.useState(),[o,d]=i.useState(0),[p,f]=i.useState(30),{t:h}=(0,u.$G)();0===p&&window.close(),setTimeout(()=>{f(p-1)},1e3),(0,i.useEffect)(()=>{window.addEventListener("beforeunload",()=>{c.bd.confirm(e,{allow:!1,type:0})}),c.bd.getPermissionInfo(e).then(e=>{console.log(e),n(e.confirm),d(e.likeNum)}).catch(e=>{s.Z.error(e.message||h("get_confirm_error"))})},[]);let g=(t,n)=>async()=>{try{await c.bd.confirm(e,{allow:t,type:n}),window.close()}catch(e){s.Z.error(e.message||h("confirm_error")),setTimeout(()=>{window.close()},3e3)}},m=(0,i.useMemo)(()=>t&&t.metadata&&Object.keys(t.metadata)||[],[t]);return(0,r.jsx)("div",{className:"h-full",children:(0,r.jsxs)(a.Z,{direction:"vertical",children:[(0,r.jsx)("span",{className:"text-2xl font-500",children:null==t?void 0:t.title}),m.map(e=>(0,r.jsx)("span",{className:"text-base",children:`${e}: ${t.metadata[e]}`},e)),(0,r.jsx)("span",{className:"text-xl font-500",children:null==t?void 0:t.describe}),(0,r.jsx)("div",{children:(0,r.jsx)(l.Z,{type:"primary",onClick:g(!1,1),children:`${h("ignore")} (${p})`})}),(0,r.jsx)("div",{children:(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(l.Z,{onClick:g(!0,1),status:"success",children:h("allow_once")}),(0,r.jsx)(l.Z,{onClick:g(!0,3),status:"success",children:h("temporary_allow",{permissionContent:null==t?void 0:t.permissionContent})}),o>2&&(0,r.jsx)(l.Z,{onClick:g(!0,2),status:"success",children:h("temporary_allow_all",{permissionContent:null==t?void 0:t.permissionContent})}),(0,r.jsx)(l.Z,{onClick:g(!0,5),status:"success",children:h("permanent_allow",{permissionContent:null==t?void 0:t.permissionContent})}),o>2&&(0,r.jsx)(l.Z,{onClick:g(!0,4),status:"success",children:h("permanent_allow_all",{permissionContent:null==t?void 0:t.permissionContent})})]})}),(0,r.jsx)("div",{children:(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(l.Z,{onClick:g(!1,1),status:"danger",children:h("deny_once")}),(0,r.jsx)(l.Z,{onClick:g(!1,3),status:"danger",children:h("temporary_deny",{permissionContent:null==t?void 0:t.permissionContent})}),o>2&&(0,r.jsx)(l.Z,{onClick:g(!1,2),status:"danger",children:h("temporary_deny_all",{permissionContent:null==t?void 0:t.permissionContent})}),(0,r.jsx)(l.Z,{onClick:g(!1,5),status:"danger",children:h("permanent_deny",{permissionContent:null==t?void 0:t.permissionContent})}),o>2&&(0,r.jsx)(l.Z,{onClick:g(!1,4),status:"danger",children:h("permanent_deny_all",{permissionContent:null==t?void 0:t.permissionContent})})]})})]})})},{})})});o.createRoot(document.getElementById("root")).render(y)},75025:function(e,t,n){n.d(t,{PI:()=>u,bd:()=>d,g4:()=>b});var r=n(28399),i=n(17969),o=n(77811),s=n(91127),a=n(67824),l=n(59991);let u=new a.aP(l.yw);new a.Ji(l.yw);let c=new a.TD(l.yw);new a.bt(l.yw);let d=new a.Y2(l.yw);new a.DN(l.yw),new a.zm(l.yw),new a.Uf(l.yw);let p=(0,r.hg)("script/fetchScriptList",async()=>await u.getAllScripts()),f=(0,r.hg)("script/enableScript",async e=>await u.enable(e.uuid,e.enable)),h=(0,r.hg)("script/runScript",async e=>await c.runScript(e)),g=(0,r.hg)("script/stopScript",async e=>await c.stopScript(e)),m=(0,r.hg)("script/deleteScript",async e=>await u.delete(e));(0,r.hg)("script/requestFilterResult",async e=>await u.getFilterResult(e));let y=(e,t,n)=>{let r=e.find(e=>e.uuid===t);r&&n(r)},b=(0,i.Em)({name:"script",initialState:{scripts:[]},reducers:{upsertScript:(e,t)=>{let n=e.scripts.find(e=>e.uuid===t.payload.uuid);n?Object.assign(n,t.payload):e.scripts.splice(0,0,t.payload)},batchDeleteScript:(e,t)=>{e.scripts=e.scripts.filter(e=>!t.payload.includes(e.uuid))},sortScript:(e,t)=>{let n=0,r=0;e.scripts.forEach((e,i)=>{e.uuid===t.payload.active?n=i:e.uuid===t.payload.over&&(r=i)});let i=(0,s.Rp)(e.scripts,n,r);e.scripts=i;for(let t=0;t<e.scripts.length;t+=1)e.scripts[t].sort!==t&&(e.scripts[t].sort=t);u.sortScript(t.payload.active,t.payload.over)},updateRunStatus:(e,t)=>{let n=e.scripts.find(e=>e.uuid===t.payload.uuid);n&&(n.runStatus=t.payload.runStatus)},updateEnableStatus:(e,t)=>{e.scripts=e.scripts.map(e=>(t.payload.uuids.includes(e.uuid)&&(e.status=t.payload.enable?o.Kv:o.J7),e))},enableLoading(e,t){e.scripts=e.scripts.map(e=>(t.payload.uuids.includes(e.uuid)&&(e.enableLoading=t.payload.loading),e))},setScriptFavicon:(e,t)=>{let n=new Map;for(let t of e.scripts)n.set(t.uuid,t);for(let e of t.payload){let t=n.get(e.uuid);t&&(t.favorite=e.fav)}}},extraReducers:e=>{e.addCase(p.fulfilled,(e,t)=>{e.scripts=t.payload}).addCase(f.fulfilled,(e,t)=>{y(e.scripts,t.meta.arg.uuid,e=>{e.enableLoading=!1,e.status=t.meta.arg.enable?o.Kv:o.J7})}).addCase(f.pending,(e,t)=>y(e.scripts,t.meta.arg.uuid,e=>e.enableLoading=!0)).addCase(m.fulfilled,(e,t)=>{e.scripts=e.scripts.filter(e=>e.uuid!==t.meta.arg)}).addCase(m.pending,(e,t)=>y(e.scripts,t.meta.arg,e=>e.actionLoading=!0)).addCase(h.pending,(e,t)=>y(e.scripts,t.meta.arg,e=>e.actionLoading=!0)).addCase(h.fulfilled,(e,t)=>y(e.scripts,t.meta.arg,e=>e.actionLoading=!1)).addCase(g.pending,(e,t)=>y(e.scripts,t.meta.arg,e=>e.actionLoading=!0)).addCase(g.fulfilled,(e,t)=>y(e.scripts,t.meta.arg,e=>e.actionLoading=!1))},selectors:{selectScripts:e=>e.scripts}}),{sortScript:v,upsertScript:S,batchDeleteScript:_,enableLoading:x,updateEnableStatus:w}=b.actions,{selectScripts:E}=b.selectors},59991:function(e,t,n){n.d(t,{RH:()=>u,yw:()=>c});var r=n(24300),i=n(20202),o=n(9701),s=n(30159),a=n(67824);let l=new r.z,u=new i.Tf(l),c=new o.Nx;new a.o1(c),(0,s.cW)(u)},20202:function(e,t,n){n.d(t,{Tf:()=>d});var r=n(69298),i=n(92005),o=n(41663),s=n(30159),a=n(91088),l=n(88348);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let c="systemConfigChange";class d{addListener(e,t){this.mq.subscribe(c,n=>{n.key===e&&t(n.value)})}get(e,t){if(this.cache.has(e)){var n;let r=this.cache.get(e);return Promise.resolve(r=void 0===r?(null==t||null==(n=t.asyncValue)?void 0:n.call(t))||t:r)}return this.storage.get(e).then(n=>{var r;return this.cache.set(e,n),n=void 0===n?(null==t||null==(r=t.asyncValue)?void 0:r.call(t))||t:n})}set(e,t){void 0===t?(this.cache.delete(e),this.storage.remove(e)):(this.cache.set(e,t),this.storage.set(e,t)),this.mq.publish(c,{key:e,value:t})}getChangetime(){return this.get("changetime",0)}setChangetime(e){this.set("changetime",e)}getCheckScriptUpdateCycle(){return this.get("check_script_update_cycle",86400)}setCheckScriptUpdateCycle(e){this.set("check_script_update_cycle",e)}getSilenceUpdateScript(){return this.get("silence_update_script",!1)}setSilenceUpdateScript(e){this.set("silence_update_script",e)}getEnableAutoSync(){return this.get("enable_auto_sync",!0)}setEnableAutoSync(e){this.set("enable_auto_sync",e)}getUpdateDisableScript(){return this.get("update_disable_script",!0)}setUpdateDisableScript(e){this.set("update_disable_script",e)}getVscodeUrl(){return this.get("vscode_url","ws://localhost:8642")}setVscodeUrl(e){this.set("vscode_url",e)}getVscodeReconnect(){return this.get("vscode_reconnect",!1)}setVscodeReconnect(e){this.set("vscode_reconnect",e)}getBackup(){return this.get("backup",{filesystem:"webdav",params:{}})}setBackup(e){this.set("backup",e)}getCloudSync(){return this.get("cloud_sync",{enable:!1,syncDelete:!0,syncStatus:!0,filesystem:"webdav",params:{}})}setCloudSync(e){this.set("cloud_sync",e)}getCatFileStorage(){return this.get("cat_file_storage",{status:"unset",filesystem:"webdav",params:{}})}setCatFileStorage(e){this.set("cat_file_storage",e)}getEnableEslint(){return this.get("enable_eslint",!0)}setEnableEslint(e){this.set("enable_eslint",e)}getEslintConfig(){return this.get("eslint_config",i.u)}setEslintConfig(e){return""===e?void this.set("eslint_config",void 0):(JSON.parse(e),this.set("eslint_config",e))}getEditorConfig(){return this.get("editor_config",o.u)}setEditorConfig(e){return""===e?void this.set("editor_config",void 0):(JSON.parse(e),this.set("editor_config",e))}getEditorTypeDefinition(){return localStorage.getItem("editor_type_definition")||l}setEditorTypeDefinition(e){if(""===e)return void delete localStorage.editor_type_definition;localStorage.setItem("editor_type_definition",e)}getLogCleanCycle(){return this.get("log_clean_cycle",7)}setLogCleanCycle(e){this.set("log_clean_cycle",e)}getScriptListColumnWidth(){return this.get("script_list_column_width",{})}setScriptListColumnWidth(e){this.set("script_list_column_width",e)}getMenuExpandNum(){return this.get("menu_expand_num",5)}setMenuExpandNum(e){this.set("menu_expand_num",e)}async getLanguage(){if(globalThis.localStorage){let e=localStorage.getItem("language");if(e)return e}return this.get("language",{asyncValue:()=>(0,s.kx)().then(e=>e||chrome.i18n.getUILanguage())}).then(e=>(globalThis.localStorage&&localStorage.setItem("language",`${e}`),e))}setLanguage(e){this.set("language",e),(0,s.D0)(e),globalThis.localStorage&&localStorage.setItem("language",e)}setCheckUpdate(e){this.set("check_update",{notice:e.notice,version:e.version,isRead:e.isRead})}getCheckUpdate(){return this.get("check_update",{notice:"",isRead:!1,version:a.mr})}setEnableScript(e){chrome.extension.inIncognitoContext?this.set("enable_script_incognito",e):this.set("enable_script",e)}async getEnableScript(){if(!chrome.extension.inIncognitoContext)return this.get("enable_script",!0);{let[e,t]=await Promise.all([this.get("enable_script",!0),this.get("enable_script_incognito",!0)]);return e&&t}}async getEnableScriptNormal(){return this.get("enable_script",!0)}async getEnableScriptIncognite(){return this.get("enable_script_incognito",!0)}setBlacklist(e){this.set("blacklist",e)}getBlacklist(){return this.get("blacklist","")}setBadgeNumberType(e){this.set("badge_number_type",e)}getBadgeNumberType(){return this.get("badge_number_type","run_count")}setBadgeBackgroundColor(e){this.set("badge_background_color",e)}getBadgeBackgroundColor(){return this.get("badge_background_color","#4e5969")}setBadgeTextColor(e){this.set("badge_text_color",e)}getBadgeTextColor(){return this.get("badge_text_color","#ffffff")}setScriptMenuDisplayType(e){this.set("script_menu_display_type",e)}getScriptMenuDisplayType(){return this.get("script_menu_display_type","all")}constructor(e){u(this,"mq",void 0),u(this,"cache",void 0),u(this,"storage",void 0),this.mq=e,this.cache=new Map,this.storage=new r.Z("system",!0),this.mq.subscribe(c,e=>{let{key:t,value:n}=e;this.cache.set(t,n)})}}},23831:function(e,t,n){n.d(t,{U:()=>i});let r=/YYYY|MM|DD|HH|mm|ss/g;function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return t.replace(r,t=>{switch(t){case"YYYY":return e.getFullYear().toString();case"MM":{let t=e.getMonth()+1;return t<10?"0"+t:t.toString()}case"DD":{let t=e.getDate();return t<10?"0"+t:t.toString()}case"HH":{let t=e.getHours();return t<10?"0"+t:t.toString()}case"mm":{let t=e.getMinutes();return t<10?"0"+t:t.toString()}case"ss":{let t=e.getSeconds();return t<10?"0"+t:t.toString()}}return t})}},92249:function(e,t,n){n.d(t,{TJ:()=>s});var r=n(84663);class i extends r.ZP{constructor(){var e,t;super("filehandle-temp-dexie"),t=void 0,(e="handles")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t,this.version(1).stores({handles:""}),this.handles=this.table("handles")}}let o=new i;async function s(e,t){await o.handles.put({handle:t,timestamp:Date.now()},e)}},30723:function(e,t,n){n.d(t,{zg:()=>a});var r=n(50726),i=n(77811);n(56378);var o=n(24922),s=n(17245);async function a(e,t,n){let a,l,u,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],d=arguments.length>4?arguments[4]:void 0;d=d??new i.Ru;let p=function(e){let t=!1,n=/\/\/\s*==UserScript==([\s\S]+?)\/\/\s*==\/UserScript==/m,r=n.exec(e);if(!r){if(!(r=(n=/\/\/\s*==UserSubscribe==([\s\S]+?)\/\/\s*==\/UserSubscribe==/m).exec(e)))return null;t=!0}let i={},o=(n=/\/\/\s*@([\S]+)((.+?)$|$)/gm).exec(r[1]);for(;null!==o;){let[e,t]=[o[1].toLowerCase().trim(),o[2].trim()],s=i[e];null==s&&(s=[]),s.push(t),i[e]=s,o=n.exec(r[1])}return void 0===i.name||Object.keys(i).length<3?null:(i.namespace||(i.namespace=[""]),t&&(i.usersubscribe=[]),i)}(e);if(null==p)throw Error("MetaData信息错误");if(void 0===p.name)throw Error("脚本名不能为空");if(void 0===p.version)throw Error("脚本@version版本不能为空");if(void 0===p.namespace)throw Error("脚本@namespace命名空间不能为空");let f=i.oO;if(void 0!==p.crontab){f=i.CP;try{(0,o.R)(p.crontab[0])}catch{throw Error(`\u{9519}\u{8BEF}\u{7684}\u{5B9A}\u{65F6}\u{8868}\u{8FBE}\u{5F0F},\u{8BF7}\u{68C0}\u{67E5}: ${p.crontab[0]}`)}}else void 0!==p.background&&(f=i.BW);let h="",g="",m=t;p.updateurl&&p.downloadurl?([g]=p.updateurl,[m]=p.downloadurl):g=t.replace("user.js","meta.js"),t.includes("/")&&(a=t.split("/"))[2]&&([,h]=a);let y=n||(0,r.Z)(),b=(0,s.J)(e),v=Date.now(),S={uuid:y,name:p.name[0],author:p.author&&p.author[0],namespace:p.namespace&&p.namespace[0],originDomain:h,origin:t,checkUpdate:!0,checkUpdateUrl:g,downloadUrl:m,config:b,metadata:p,selfMetadata:{},sort:-1,type:f,status:i.J7,runStatus:i.le,createtime:v,updatetime:v,checktime:v};if(n&&(l=await d.get(n)),l||n&&!c||(l=await d.findByNameAndNamespace(S.name,S.namespace)),l){if(l.type===i.oO&&S.type!==i.oO||S.type===i.oO&&l.type!==i.oO)throw Error("脚本类型不匹配,普通脚本与后台脚本不能互相转变");let e=await new i.Gf().get(l.uuid);if(!e)throw Error("旧的脚本代码不存在");u=e;let{uuid:t,createtime:n,lastruntime:r,error:o,sort:s,selfMetadata:a,subscribeUrl:c,checkUpdate:d,status:p}=l;Object.assign(S,{uuid:t,createtime:n,lastruntime:r,error:o,sort:s,selfMetadata:a||{},subscribeUrl:c,checkUpdate:d,status:p})}else S.type===i.oO&&(S.status=i.Kv),S.checktime=v;return{script:S,oldScript:l,oldScriptCode:null==u?void 0:u.code}}},19245:function(e,t,n){e.exports={}},63498:function(e,t,n){e.exports={}},15589:function(e){e.exports={i8:"1.1.1"}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.k=e=>""+e+".css",n.u=e=>""+e+".js",n.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="scriptcat:";n.l=function(r,i,o,s){if(e[r])return void e[r].push(i);if(void 0!==o)for(var a,l,u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[i];var p=function(t,n){a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach(function(e){return e(n)}),t)return t(n)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),l&&document.head.appendChild(a)}})(),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=[];n.O=(t,r,i,o)=>{if(r){o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[r,i,o];return}for(var a=1/0,s=0;s<e.length;s++){for(var[r,i,o]=e[s],l=!0,u=0;u<r.length;u++)(!1&o||a>=o)&&Object.keys(n.O).every(e=>n.O[e](r[u]))?r.splice(u--,1):(l=!1,o<a&&(a=o));if(l){e.splice(s--,1);var c=i();void 0!==c&&(t=c)}}return t}})(),n.rv=()=>"1.4.4",n.j="5447",(()=>{n.g.importScripts&&(e=n.g.location+"");var e,t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var i=r.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=r[i--].src}if(!e)throw Error("Automatic publicPath is not supported in this browser");n.p=e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/")})(),(()=>{var e={1458:0,5447:0},t="scriptcat",r=(t,n)=>{e[n]=0},i="data-webpack-loading";r(n.m,0,"5447"),r(n.m,0,"1458"),n.f.css=(o,s,a)=>{var l=n.o(e,o)?e[o]:void 0;if(0!==l)if(l)s.push(l[2]);else if(/^(1458|5447)$/.test(o)){var u=new Promise(function(t,n){l=e[o]=[t,n]});s.push(l[2]=u);var c=n.p+n.k(o),d=Error(),p=function(t){if(n.o(e,o)&&(0!==(l=e[o])&&(e[o]=void 0),l))if("load"!==t.type){var i=t&&t.type,s=t&&t.target&&t.target.src;d.message="Loading css chunk "+o+" failed.\n("+i+": "+s+")",d.name="ChunkLoadError",d.type=i,d.request=s,l[1](d)}else r(n.m,o),l[0]()};"undefined"!=typeof document?((e,r,o,s,a)=>{var l,u,c="chunk-"+e;if(!s){for(var d=document.getElementsByTagName("link"),p=0;p<d.length;p++){var f=d[p],h=f.getAttribute("href")||f.href;if(h&&!h.startsWith(n.p)&&(h=n.p+(h.startsWith("/")?h.slice(1):h)),"stylesheet"==f.rel&&(h&&h.startsWith(r)||f.getAttribute("data-webpack")==t+":"+c)){l=f;break}}if(!o)return}l||(u=!0,l=document.createElement("link"),n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+":"+c),a&&l.setAttribute("fetchpriority",a),l.setAttribute(i,1),l.rel="stylesheet",l.href=r);var g=(e,t)=>{if(l.onerror=l.onload=null,l.removeAttribute(i),clearTimeout(m),t&&"load"!=t.type&&l.parentNode.removeChild(l),o(t),e)return e(t)};if(l.getAttribute(i)){var m=setTimeout(g.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=g.bind(null,l.onerror),l.onload=g.bind(null,l.onload)}else g(void 0,{type:"load",target:l});return s&&s.getAttribute("fetchpriority")&&l.setAttribute("fetchpriority",s.getAttribute("fetchpriority")),s?document.head.insertBefore(l,s):u&&document.head.appendChild(l)})(o,c,p,void 0,a):p({type:"load"})}else e[o]=0}})(),(()=>{var e={5447:0,7079:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else if(7079!=t){var o=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=o);var s=n.p+n.u(t),a=Error();n.l(s,function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}},"chunk-"+t,t)}else e[t]=0},n.O.j=t=>0===e[t];var t=(t,r)=>{var i,o,[s,a,l]=r,u=0;if(s.some(t=>0!==e[t])){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)var c=l(n)}for(t&&t(r);u<s.length;u++)o=s[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},r=self.webpackChunkscriptcat=self.webpackChunkscriptcat||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.ruid="bundler=rspack@1.4.4";var r=n.O(void 0,["9400","1458","1456","3603","8054","2438","9617","9887","6790","9841","3641","2266","4452","7079","5749"],function(){return n(64281)});r=n.O(r)})();